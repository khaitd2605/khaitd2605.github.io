<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="Pusoy ZingPlay Custom Title for Social Media"
    />
    <meta
      property="og:description"
      content="Improve your skills by playing online Chinese poker also known as the 13 card-game, the most exciting & competitive card game."
    />
    <meta
      property="og:image"
      content="https://portal-dev.service.zingplay.com/cdn/ios/pusoydn_ph/banner/20221110.9-34-38.jpg"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <title>Pusoy ZingPlay</title>
  </head>
  <body>
    <script>
      // Đặt các URL ở đây
      let longUrl = "zps://zps.game.pusoy.th"; // URL ban đầu để chuyển hướng
      let appStoreUrl =
        "https://apps.apple.com/us/app/%E0%B9%84%E0%B8%9E-%E0%B8%AA%E0%B8%B2%E0%B8%A1%E0%B8%81%E0%B8%AD%E0%B8%87-zingplay/id6504484677";
      let playStoreUrl =
        "https://play.google.com/store/apps/details?id=zps.game.pusoy.th&hl=en_US";

      // Chuyển hướng ban đầu
      const params = new URLSearchParams(window.location.search);
      let firebaseLink = params.get("link");
      const paramsString = params.toString(); // Convert to query string

      console.log("test6");

      // Kiểm tra nếu URL chứa 'livestream' hoặc 'bco'
      let isOpenOther = false;
      const iOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
      const ua = navigator.userAgent.toLowerCase();
      const isAndroid = ua.includes("android");

      if (firebaseLink) { // follow link param
        appStoreUrl = firebaseLink;
        playStoreUrl = firebaseLink;
      }

      if (iOS) {
        longUrl = "com.mpt.pusoy://play";
      }
      window.location.href = longUrl + "?" + paramsString;
      if (iOS) {
        setTimeout(function () {
          if (!isOpenOther) {
            window.location = appStoreUrl;
          }
        }, 5000);
      } else {
        if (isAndroid) {
          setTimeout(function () {
            if (!isOpenOther) {
              window.location = playStoreUrl;
            }
          }, 5000);
        } else {
          // Nếu không phải iOS hay Android, chuyển đến Google Play như dự phòng
          setTimeout(function () {
            window.location = playStoreUrl;
          }, 1000);
        }
      }

      // Kiểm tra nếu người dùng đã chuyển sang ứng dụng khác (ứng dụng đã mở)
      function handleVisibilityChange() {
        if (document.hidden) {
          isOpenOther = true;
        }
      }
      document.addEventListener("visibilitychange", handleVisibilityChange);
    </script>
  </body>
</html>
